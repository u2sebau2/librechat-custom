import{c as e,E as t,S as n,a as r,f as l,b as o,R as a,M as i,d as s,A as c,T as u,e as d,P as f,C as m,F as p,g as h,h as g,i as y,j as b,k as v}from"./codemirror-state.Pf71Wo5N.js";import{E as w,D as k,k as x,W as A,a as S}from"./codemirror-view.CA7MJLsC.js";import{s as C,i as D,I as T,g as I,a as $,b as O,m as B,L as E,c as M,d as z,f as j,e as F,h as N,j as J,k as V,l as q,n as L,o as P}from"./codemirror-language.BRqRHx8S.js";import{N as R,D as X,E as H,I as _,F as U,G as W,H as G}from"./vendor.CIjlGcQ4.js";function Y(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Z(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:l}of e){t[l[0]]=!0;for(let e=1;e<l.length;e++)n[l[e]]=!0}let r=Y(t)+Y(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let l=e.matchBefore(r);return l||e.explicit?{from:l?l.from:e.pos,options:t,validFor:n}:null}}const K=c.define(),Q=w.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"¬∑¬∑¬∑"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'∆í'"}},".cm-completionIcon-class":{"&:after":{content:"'‚óã'"}},".cm-completionIcon-interface":{"&:after":{content:"'‚óå'"}},".cm-completionIcon-variable":{"&:after":{content:"'ùë•'"}},".cm-completionIcon-constant":{"&:after":{content:"'ùê∂'"}},".cm-completionIcon-type":{"&:after":{content:"'ùë°'"}},".cm-completionIcon-enum":{"&:after":{content:"'‚à™'"}},".cm-completionIcon-property":{"&:after":{content:"'‚ñ°'"}},".cm-completionIcon-keyword":{"&:after":{content:"'üîëÔ∏é'"}},".cm-completionIcon-namespace":{"&:after":{content:"'‚ñ¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ee{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class te{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,i.TrackDel),n=e.mapPos(this.to,1,i.TrackDel);return null==t||null==n?null:new te(this.field,t,n)}}class ne{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],l=e.doc.lineAt(t),o=/^\s*/.exec(l.text)[0];for(let a of this.lines){if(n.length){let n=o,l=/^\t*/.exec(a)[0].length;for(let t=0;t<l;t++)n+=e.facet(D);r.push(t+n.length-l),a=n+a.slice(l)}n.push(a),t+=a.length+1}return{text:n,ranges:this.fieldPositions.map((e=>new te(e.field,r[e.line]+e.from,r[e.line]+e.to)))}}static parse(e){let t,n=[],r=[],l=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let e=t[1]?+t[1]:null,a=t[2]||t[3]||"",i=-1,s=a.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:s&&n[t].name==s)&&(i=t);if(i<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:s}),i=t;for(let e of l)e.field>=i&&e.field++}l.push(new ee(i,r.length,t.index,t.index+s.length)),o=o.slice(0,t.index)+a+o.slice(t.index+t[0].length)}o=o.replace(/\\([{}])/g,((e,t,n)=>{for(let o of l)o.line==r.length&&o.from>n&&(o.from--,o.to--);return t})),r.push(o)}return new ne(r,l)}}let re=k.widget({widget:new class extends A{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),le=k.mark({class:"cm-snippetField"});class oe{constructor(e,t){this.ranges=e,this.active=t,this.deco=k.set(e.map((e=>(e.from==e.to?re:le).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new oe(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const ae=o.define({map:(e,t)=>e&&e.map(t)}),ie=o.define(),se=n.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(ae))return n.value;if(n.is(ie)&&e)return new oe(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>w.decorations.from(e,(e=>e?e.deco:k.none))});function ce(e,n){return t.create(e.filter((e=>e.field==n)).map((e=>t.range(e.from,e.to))))}function ue(e){let t=ne.parse(e);return(e,n,r,l)=>{let{text:a,ranges:i}=t.instantiate(e.state,r),s={changes:{from:r,to:l,insert:d.of(a)},scrollIntoView:!0,annotations:n?[K.of(n),u.userEvent.of("input.complete")]:void 0};if(i.length&&(s.selection=ce(i,0)),i.some((e=>e.field>0))){let t=new oe(i,0),n=s.effects=[ae.of(t)];void 0===e.state.field(se,!1)&&n.push(o.appendConfig.of([se,pe,ge,Q]))}e.dispatch(e.state.update(s))}}function de(e){return({state:t,dispatch:n})=>{let r=t.field(se,!1);if(!r||e<0&&0==r.active)return!1;let l=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==l+e));return n(t.update({selection:ce(r.ranges,l),effects:ae.of(o?null:new oe(r.ranges,l)),scrollIntoView:!0})),!0}}const fe=[{key:"Tab",run:de(1),shift:de(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(se,!1)&&(t(e.update({effects:ae.of(null)})),!0)}],me=p.define({combine:e=>e.length?e[0]:fe}),pe=f.highest(x.compute([me],(e=>e.facet(me))));function he(e,t){return Object.assign(Object.assign({},t),{apply:ue(e)})}const ge=w.domEventHandlers({mousedown(e,t){let n,r=t.state.field(se,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let l=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!l||l.field==r.active)&&(t.dispatch({selection:ce(r.ranges,l.field),effects:ae.of(r.ranges.some((e=>e.field>l.field))?new oe(r.ranges,l.field):null),scrollIntoView:!0}),!0)}}),ye={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},be=o.define({map(e,t){let n=t.mapPos(e,-1,i.TrackAfter);return null==n?void 0:n}}),ve=new class extends s{};ve.startSide=1,ve.endSide=-1;const we=n.define({create:()=>a.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(be)&&(e=e.update({add:[ve.range(n.value,n.value+1)]}));return e}});function ke(){return[De,we]}const xe="()[]{}<>";function Ae(e){for(let t=0;t<xe.length;t+=2)if(xe.charCodeAt(t)==e)return xe.charAt(t+1);return l(e<128?e:e+1)}function Se(e,t){return e.languageDataAt("closeBrackets",t)[0]||ye}const Ce="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),De=w.inputHandler.of(((t,n,l,o)=>{if((Ce?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let a=t.state.selection.main;if(o.length>2||2==o.length&&1==r(e(o,0))||n!=a.from||l!=a.to)return!1;let i=function(t,n){let r=Se(t,t.selection.main.head),l=r.brackets||ye.brackets;for(let o of l){let a=Ae(e(o,0));if(n==o)return a==o?Ee(t,o,l.indexOf(o+o+o)>-1,r):Oe(t,o,a,r.before||ye.before);if(n==a&&Ie(t,t.selection.main.from))return Be(t,o,a)}return null}(t.state,o);return!!i&&(t.dispatch(i),!0)})),Te=[{key:"Backspace",run:({state:n,dispatch:l})=>{if(n.readOnly)return!1;let o=Se(n,n.selection.main.head).brackets||ye.brackets,a=null,i=n.changeByRange((l=>{if(l.empty){let a=function(t,n){let l=t.sliceString(n-2,n);return r(e(l,0))==l.length?l:l.slice(1)}(n.doc,l.head);for(let r of o)if(r==a&&$e(n.doc,l.head)==Ae(e(r,0)))return{changes:{from:l.head-r.length,to:l.head+r.length},range:t.cursor(l.head-r.length)}}return{range:a=l}}));return a||l(n.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function Ie(e,t){let n=!1;return e.field(we).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function $e(t,n){let l=t.sliceString(n,n+2);return l.slice(0,r(e(l,0)))}function Oe(e,n,r,l){let o=null,a=e.changeByRange((a=>{if(!a.empty)return{changes:[{insert:n,from:a.from},{insert:r,from:a.to}],effects:be.of(a.to+n.length),range:t.range(a.anchor+n.length,a.head+n.length)};let i=$e(e.doc,a.head);return!i||/\s/.test(i)||l.indexOf(i)>-1?{changes:{insert:n+r,from:a.head},effects:be.of(a.head+n.length),range:t.cursor(a.head+n.length)}:{range:o=a}}));return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Be(e,n,r){let l=null,o=e.changeByRange((n=>n.empty&&$e(e.doc,n.head)==r?{changes:{from:n.head,to:n.head+r.length,insert:r},range:t.cursor(n.head+r.length)}:l={range:n}));return l?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Ee(e,n,r,l){let o=l.stringPrefixes||ye.stringPrefixes,a=null,i=e.changeByRange((l=>{if(!l.empty)return{changes:[{insert:n,from:l.from},{insert:n,from:l.to}],effects:be.of(l.to+n.length),range:t.range(l.anchor+n.length,l.head+n.length)};let i,s=l.head,c=$e(e.doc,s);if(c==n){if(Me(e,s))return{changes:{insert:n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)};if(Ie(e,s)){let l=r&&e.sliceDoc(s,s+3*n.length)==n+n+n?n+n+n:n;return{changes:{from:s,to:s+l.length,insert:l},range:t.cursor(s+l.length)}}}else{if(r&&e.sliceDoc(s-2*n.length,s)==n+n&&(i=ze(e,s-2*n.length,o))>-1&&Me(e,i))return{changes:{insert:n+n+n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)};if(e.charCategorizer(s)(c)!=m.Word&&ze(e,s,o)>-1&&!function(e,t,n,r){let l=C(e).resolveInner(t,-1),o=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let a=0;a<5;a++){let a=e.sliceDoc(l.from,Math.min(l.to,l.from+n.length+o)),i=a.indexOf(n);if(!i||i>-1&&r.indexOf(a.slice(0,i))>-1){let t=l.firstChild;for(;t&&t.from==l.from&&t.to-t.from>n.length+i;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let s=l.to==t&&l.parent;if(!s)break;l=s}return!1}(e,s,n,o))return{changes:{insert:n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)}}return{range:a=l}}));return a?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Me(e,t){let n=C(e).resolveInner(t+1);return n.parent&&n.from==t}function ze(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=m.Word)return t;for(let l of n){let n=t-l.length;if(e.sliceDoc(n,t)==l&&r(e.sliceDoc(n-1,n))!=m.Word)return n}return-1}function je(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let l=e(t,n);return!!l&&(r(n.update(l)),!0)}}const Fe=je(Pe,0),Ne=je(Le,0),Je=je(((e,t)=>Le(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),l=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=l.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:l.to})}return t}(t))),0);function Ve(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const qe=50;function Le(e,t,n=t.selection.ranges){let r=n.map((e=>Ve(t,e.from).block));if(!r.every((e=>e)))return null;let l=n.map(((e,n)=>function(e,{open:t,close:n},r,l){let o,a,i=e.sliceDoc(r-qe,r),s=e.sliceDoc(l,l+qe),c=/\s*$/.exec(i)[0].length,u=/^\s*/.exec(s)[0].length,d=i.length-c;if(i.slice(d-t.length,d)==t&&s.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:l+u,margin:u&&1}};l-r<=2*qe?o=a=e.sliceDoc(r,l):(o=e.sliceDoc(r,r+qe),a=e.sliceDoc(l-qe,l));let f=/^\s*/.exec(o)[0].length,m=/\s*$/.exec(a)[0].length,p=a.length-m-n.length;return o.slice(f,f+t.length)==t&&a.slice(p,p+n.length)==n?{open:{pos:r+f+t.length,margin:/\s/.test(o.charAt(f+t.length))?1:0},close:{pos:l-m-n.length,margin:/\s/.test(a.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!l.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>l[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&l.some((e=>e))){let e=[];for(let t,n=0;n<l.length;n++)if(t=l[n]){let l=r[n],{open:o,close:a}=t;e.push({from:o.pos-l.open.length,to:o.pos+o.margin},{from:a.pos-a.margin,to:a.pos+l.close.length})}return{changes:e}}return null}function Pe(e,t,n=t.selection.ranges){let r=[],l=-1;for(let{from:o,to:a}of n){let e=r.length,n=1e9,i=Ve(t,o).line;if(i){for(let e=o;e<=a;){let s=t.doc.lineAt(e);if(s.from>l&&(o==a||a>s.from)){l=s.from;let e=/^\s*/.exec(s.text)[0].length,t=e==s.length,o=s.text.slice(e,e+i.length)==i?e:-1;e<s.text.length&&e<n&&(n=e),r.push({line:s,comment:o,token:i,indent:e,empty:t,single:!1})}e=s.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:l,indent:o,empty:a,single:i}of r)!i&&a||e.push({from:t.from+o,insert:l+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:l}of r)if(n>=0){let r=t.from+n,o=r+l.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const Re=c.define(),Xe=c.define(),He=p.define(),_e=p.define({combine:e=>y(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),Ue=n.define({create:()=>ut.empty,update(e,t){let n=t.state.facet(_e),r=t.annotation(Re);if(r){let l=et.fromTransaction(t,r.selection),o=r.side,a=0==o?e.undone:e.done;return a=l?tt(a,a.length,n.minDepth,l):ot(a,t.startState.selection),new ut(0==o?r.rest:a,0==o?a:r.rest)}let l=t.annotation(Xe);if("full"!=l&&"before"!=l||(e=e.isolate()),!1===t.annotation(u.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=et.fromTransaction(t),a=t.annotation(u.time),i=t.annotation(u.userEvent);return o?e=e.addChanges(o,a,i,n,t):t.selection&&(e=e.addSelection(t.startState.selection,a,i,n.newGroupDelay)),"full"!=l&&"after"!=l||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new ut(e.done.map(et.fromJSON),e.undone.map(et.fromJSON))});function We(e={}){return[Ue,_e.of(e),w.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Ye:"historyRedo"==e.inputType?Ze:null;return!!n&&(e.preventDefault(),n(t))}})]}function Ge(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let l=n.field(Ue,!1);if(!l)return!1;let o=l.pop(e,n,t);return!!o&&(r(o),!0)}}const Ye=Ge(0,!1),Ze=Ge(1,!1),Ke=Ge(0,!0),Qe=Ge(1,!0);class et{constructor(e,t,n,r,l){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=l}setSelAfter(e){return new et(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new et(e.changes&&b.fromJSON(e.changes),[],e.mapped&&v.fromJSON(e.mapped),e.startSelection&&t.fromJSON(e.startSelection),e.selectionsAfter.map(t.fromJSON))}static fromTransaction(e,t){let n=rt;for(let r of e.startState.facet(He)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new et(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,rt)}static selection(e){return new et(void 0,rt,void 0,void 0,e)}}function tt(e,t,n,r){let l=t+1>n+20?t-n-1:0,o=e.slice(l,t);return o.push(r),o}function nt(e,t){return e.length?t.length?e.concat(t):e:t}const rt=[],lt=200;function ot(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-lt));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),tt(e,e.length-1,1e9,n.setSelAfter(r)))}return[et.selection([t])]}function at(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function it(e,t){if(!e.length)return e;let n=e.length,r=rt;for(;n;){let l=st(e[n-1],t,r);if(l.changes&&!l.changes.empty||l.effects.length){let t=e.slice(0,n);return t[n-1]=l,t}t=l.mapped,n--,r=l.selectionsAfter}return r.length?[et.selection(r)]:rt}function st(e,t,n){let r=nt(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):rt,n);if(!e.changes)return et.selection(r);let l=e.changes.map(t),a=t.mapDesc(e.changes,!0),i=e.mapped?e.mapped.composeDesc(a):a;return new et(l,o.mapEffects(e.effects,t),i,e.startSelection.map(a),r)}const ct=/^(input\.type|delete)($|\.)/;class ut{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ut(this.done,this.undone):this}addChanges(e,t,n,r,l){let o=this.done,a=o[o.length-1];return o=a&&a.changes&&!a.changes.empty&&e.changes&&(!n||ct.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(l,function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,l,o)=>{for(let a=0;a<n.length;){let e=n[a++],t=n[a++];o>=e&&l<=t&&(r=!0)}})),r}(a.changes,e.changes))||"input.type.compose"==n)?tt(o,o.length-1,r.minDepth,new et(e.changes.compose(a.changes),nt(e.effects,a.effects),a.mapped,a.startSelection,rt)):tt(o,o.length,r.minDepth,e),new ut(o,rt,t,n)}addSelection(e,t,n,r){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:rt;return l.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=l[l.length-1],a=e,o.ranges.length==a.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=a.ranges[t].empty)).length)?this:new ut(ot(this.done,e),this.undone,t,n);var o,a}addMapping(e){return new ut(it(this.done,e),it(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let l=r[r.length-1],o=l.selectionsAfter[0]||t.selection;if(n&&l.selectionsAfter.length)return t.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:Re.of({side:e,rest:at(r),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let n=1==r.length?rt:r.slice(0,r.length-1);return l.mapped&&(n=it(n,l.mapped)),t.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:Re.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}ut.empty=new ut(rt,rt);const dt=[{key:"Mod-z",run:Ye,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ze,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ze,preventDefault:!0},{key:"Mod-u",run:Ke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Qe,preventDefault:!0}];function ft(e,n){return t.create(e.ranges.map(n),e.mainIndex)}function mt(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function pt({state:e,dispatch:t},n){let r=ft(e.selection,n);return!r.eq(e.selection,!0)&&(t(mt(e,r)),!0)}function ht(e,n){return t.cursor(n?e.to:e.from)}function gt(e,t){return pt(e,(n=>n.empty?e.moveByChar(n,t):ht(n,t)))}function yt(e){return e.textDirectionAt(e.state.selection.main.head)==S.LTR}const bt=e=>gt(e,!yt(e)),vt=e=>gt(e,yt(e));function wt(e,t){return pt(e,(n=>n.empty?e.moveByGroup(n,t):ht(n,t)))}function kt(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function xt(e,n,r){let l,o,a=C(e).resolveInner(n.head),i=r?R.closedBy:R.openedBy;for(let t=n.head;;){let n=r?a.childAfter(t):a.childBefore(t);if(!n)break;kt(e,n,i)?a=n:t=r?n.to:n.from}return o=a.type.prop(i)&&(l=r?B(e,a.from,1):B(e,a.to,-1))&&l.matched?r?l.end.to:l.end.from:r?a.to:a.from,t.cursor(o,r?-1:1)}function At(e,t){return pt(e,(n=>{if(!n.empty)return ht(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const St=e=>At(e,!1),Ct=e=>At(e,!0);function Dt(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,l=0;if(n){for(let t of e.state.facet(w.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(l=Math.max(null==n?void 0:n.bottom,l))}t=e.scrollDOM.clientHeight-r-l}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:l,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function Tt(e,t){let n,r=Dt(e),{state:l}=e,o=ft(l.selection,(n=>n.empty?e.moveVertically(n,t,r.height):ht(n,t)));if(o.eq(l.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(l.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),i=a.top+r.marginTop,s=a.bottom-r.marginBottom;t&&t.top>i&&t.bottom<s&&(n=w.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-i}))}return e.dispatch(mt(l,o),{effects:n}),!0}const It=e=>Tt(e,!1),$t=e=>Tt(e,!0);function Ot(e,n,r){let l=e.lineBlockAt(n.head),o=e.moveToLineBoundary(n,r);if(o.head==n.head&&o.head!=(r?l.to:l.from)&&(o=e.moveToLineBoundary(n,r,!1)),!r&&o.head==l.from&&l.length){let r=/^\s*/.exec(e.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;r&&n.head!=l.from+r&&(o=t.cursor(l.from+r))}return o}function Bt(e,n){let r=ft(e.state.selection,(e=>{let r=n(e);return t.range(e.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)}));return!r.eq(e.state.selection)&&(e.dispatch(mt(e.state,r)),!0)}function Et(e,t){return Bt(e,(n=>e.moveByChar(n,t)))}const Mt=e=>Et(e,!yt(e)),zt=e=>Et(e,yt(e));function jt(e,t){return Bt(e,(n=>e.moveByGroup(n,t)))}function Ft(e,t){return Bt(e,(n=>e.moveVertically(n,t)))}const Nt=e=>Ft(e,!1),Jt=e=>Ft(e,!0);function Vt(e,t){return Bt(e,(n=>e.moveVertically(n,t,Dt(e).height)))}const qt=e=>Vt(e,!1),Lt=e=>Vt(e,!0),Pt=({state:e,dispatch:t})=>(t(mt(e,{anchor:0})),!0),Rt=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.doc.length})),!0),Xt=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.selection.main.anchor,head:0})),!0),Ht=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function _t(e,n){if(e.state.readOnly)return!1;let r="delete.selection",{state:l}=e,o=l.changeByRange((l=>{let{from:o,to:a}=l;if(o==a){let t=n(l);t<o?(r="delete.backward",t=Ut(e,t,!1)):t>o&&(r="delete.forward",t=Ut(e,t,!0)),o=Math.min(o,t),a=Math.max(a,t)}else o=Ut(e,o,!1),a=Ut(e,a,!0);return o==a?{range:l}:{changes:{from:o,to:a},range:t.cursor(o,o<l.head?-1:1)}}));return!o.changes.empty&&(e.dispatch(l.update(o,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?w.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function Ut(e,t,n){if(e instanceof w)for(let r of e.state.facet(w.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const Wt=(e,t,n)=>_t(e,(r=>{let l,o,a=r.from,{state:i}=e,s=i.doc.lineAt(a);if(n&&!t&&a>s.from&&a<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,a-s.from))){if("\t"==l[l.length-1])return a-1;let e=h(l,i.tabSize)%O(i)||O(i);for(let t=0;t<e&&" "==l[l.length-1-t];t++)a--;o=a}else o=g(s.text,a-s.from,t,t)+s.from,o==a&&s.number!=(t?i.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(o-s.from,a-s.from))&&(o=g(s.text,o-s.from,!1,!1)+s.from);return o})),Gt=e=>Wt(e,!1,!0),Yt=e=>Wt(e,!0,!1),Zt=(e,t)=>_t(e,(n=>{let r=n.head,{state:l}=e,o=l.doc.lineAt(r),a=l.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?l.doc.lines:1)&&(r+=t?1:-1);break}let i=g(o.text,r-o.from,t)+o.from,s=o.text.slice(Math.min(r,i)-o.from,Math.max(r,i)-o.from),c=a(s);if(null!=e&&c!=e)break;" "==s&&r==n.head||(e=c),r=i}return r})),Kt=e=>Zt(e,!1);function Qt(e){let t=[],n=-1;for(let r of e.selection.ranges){let l=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=l.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:l.from,to:o.to,ranges:[r]});n=o.number+1}return t}function en(e,n,r){if(e.readOnly)return!1;let l=[],o=[];for(let a of Qt(e)){if(r?a.to==e.doc.length:0==a.from)continue;let n=e.doc.lineAt(r?a.to+1:a.from-1),i=n.length+1;if(r){l.push({from:a.to,to:n.to},{from:a.from,insert:n.text+e.lineBreak});for(let n of a.ranges)o.push(t.range(Math.min(e.doc.length,n.anchor+i),Math.min(e.doc.length,n.head+i)))}else{l.push({from:n.from,to:a.from},{from:a.to,insert:e.lineBreak+n.text});for(let e of a.ranges)o.push(t.range(e.anchor-i,e.head-i))}}return!!l.length&&(n(e.update({changes:l,scrollIntoView:!0,selection:t.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0)}function tn(e,t,n){if(e.readOnly)return!1;let r=[];for(let l of Qt(e))n?r.push({from:l.from,insert:e.doc.slice(l.from,l.to)+e.lineBreak}):r.push({from:l.to,insert:e.lineBreak+e.doc.slice(l.from,l.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const nn=rn(!1);function rn(e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let l=n.changeByRange((r=>{let{from:l,to:o}=r,a=n.doc.lineAt(l),i=!e&&l==o&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=C(e).resolveInner(t),l=r.childBefore(t),o=r.childAfter(t);return l&&o&&l.to<=t&&o.from>=t&&(n=l.type.prop(R.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(l.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(l.to,o.from))?{from:l.to,to:o.from}:null}(n,l);e&&(l=o=(o<=a.to?a:n.doc.lineAt(o)).to);let s=new T(n,{simulateBreak:l,simulateDoubleBreak:!!i}),c=I(s,l);for(null==c&&(c=h(/^\s*/.exec(n.doc.lineAt(l).text)[0],n.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;i?({from:l,to:o}=i):l>a.from&&l<a.from+100&&!/\S/.test(a.text.slice(0,l))&&(l=a.from);let u=["",$(n,c)];return i&&u.push($(n,s.lineIndent(a.from,-1))),{changes:{from:l,to:o,insert:d.of(u)},range:t.cursor(l+1+u[1].length)}}));return r(n.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function ln(e,n){let r=-1;return e.changeByRange((l=>{let o=[];for(let t=l.from;t<=l.to;){let a=e.doc.lineAt(t);a.number>r&&(l.empty||l.to>a.from)&&(n(a,o,l),r=a.number),t=a.to+1}let a=e.changes(o);return{changes:o,range:t.range(a.mapPos(l.anchor,1),a.mapPos(l.head,1))}}))}const on=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ln(e,((t,n)=>{n.push({from:t.from,insert:e.facet(D)})})),{userEvent:"input.indent"})),!0),an=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ln(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let l=h(r,e.tabSize),o=0,a=$(e,Math.max(0,l-O(e)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:a.slice(o)})})),{userEvent:"delete.dedent"})),!0),sn=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>pt(e,(t=>xt(e.state,t,!yt(e)))),shift:e=>Bt(e,(t=>xt(e.state,t,!yt(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>pt(e,(t=>xt(e.state,t,yt(e)))),shift:e=>Bt(e,(t=>xt(e.state,t,yt(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>en(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>tn(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>en(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>tn(e,t,!0)},{key:"Escape",run:({state:e,dispatch:n})=>{let r=e.selection,l=null;return r.ranges.length>1?l=t.create([r.main]):r.main.empty||(l=t.create([t.cursor(r.main.head)])),!!l&&(n(mt(e,l)),!0)}},{key:"Mod-Enter",run:rn(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:n})=>{let r=Qt(e).map((({from:n,to:r})=>t.range(n,Math.min(r+1,e.doc.length))));return n(e.update({selection:t.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:n})=>{let r=ft(e.selection,(n=>{var r;for(let l=C(e).resolveStack(n.from,1);l;l=l.next){let{node:e}=l;if((e.from<n.from&&e.to>=n.to||e.to>n.to&&e.from<=n.from)&&(null===(r=e.parent)||void 0===r?void 0:r.parent))return t.range(e.to,e.from)}return n}));return n(mt(e,r)),!0},preventDefault:!0},{key:"Mod-[",run:an},{key:"Mod-]",run:on},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new T(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),l=ln(e,((t,l,o)=>{let a=I(r,t.from);if(null==a)return;/\S/.test(t.text)||(a=0);let i=/^\s*/.exec(t.text)[0],s=$(e,a);(i!=s||o.from<t.from+i.length)&&(n[t.from]=a,l.push({from:t.from,to:t.from+i.length,insert:s}))}));return l.changes.empty||t(e.update(l,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Qt(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=ft(t.selection,(t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),l=e.coordsAtPos(t.head,t.assoc||1);l&&(n=r.bottom+e.documentTop-l.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:n})=>function(e,n,r){let l=!1,o=ft(e.selection,(n=>{let r=B(e,n.head,-1)||B(e,n.head,1)||n.head>0&&B(e,n.head-1,1)||n.head<e.doc.length&&B(e,n.head+1,-1);if(!r||!r.end)return n;l=!0;let o=r.start.from==n.head?r.end.to:r.end.from;return t.cursor(o)}));return!!l&&(n(mt(e,o)),!0)}(e,n)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=Ve(e.state,n.from);return r.line?Fe(e):!!r.block&&Je(e)}},{key:"Alt-A",run:Ne},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:bt,shift:Mt,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>wt(e,!yt(e)),shift:e=>jt(e,!yt(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>pt(e,(t=>Ot(e,t,!yt(e)))),shift:e=>Bt(e,(t=>Ot(e,t,!yt(e)))),preventDefault:!0},{key:"ArrowRight",run:vt,shift:zt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>wt(e,yt(e)),shift:e=>jt(e,yt(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>pt(e,(t=>Ot(e,t,yt(e)))),shift:e=>Bt(e,(t=>Ot(e,t,yt(e)))),preventDefault:!0},{key:"ArrowUp",run:St,shift:Nt,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Pt,shift:Xt},{mac:"Ctrl-ArrowUp",run:It,shift:qt},{key:"ArrowDown",run:Ct,shift:Jt,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Rt,shift:Ht},{mac:"Ctrl-ArrowDown",run:$t,shift:Lt},{key:"PageUp",run:It,shift:qt},{key:"PageDown",run:$t,shift:Lt},{key:"Home",run:e=>pt(e,(t=>Ot(e,t,!1))),shift:e=>Bt(e,(t=>Ot(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:Pt,shift:Xt},{key:"End",run:e=>pt(e,(t=>Ot(e,t,!0))),shift:e=>Bt(e,(t=>Ot(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:Rt,shift:Ht},{key:"Enter",run:nn},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Gt,shift:Gt},{key:"Delete",run:Yt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Kt},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Zt(e,!0)},{mac:"Mod-Backspace",run:e=>_t(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>_t(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:bt,shift:Mt,preventDefault:!0},{key:"Ctrl-f",run:vt,shift:zt},{key:"Ctrl-p",run:St,shift:Nt},{key:"Ctrl-n",run:Ct,shift:Jt},{key:"Ctrl-a",run:e=>pt(e,(n=>t.cursor(e.lineBlockAt(n.head).from,1))),shift:e=>Bt(e,(n=>t.cursor(e.lineBlockAt(n.head).from)))},{key:"Ctrl-e",run:e=>pt(e,(n=>t.cursor(e.lineBlockAt(n.head).to,-1))),shift:e=>Bt(e,(n=>t.cursor(e.lineBlockAt(n.head).to)))},{key:"Ctrl-d",run:Yt},{key:"Ctrl-h",run:Gt},{key:"Ctrl-k",run:e=>_t(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:Kt},{key:"Ctrl-o",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:d.of(["",""])},range:t.cursor(e.from)})));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange((n=>{if(!n.empty||0==n.from||n.from==e.doc.length)return{range:n};let r=n.from,l=e.doc.lineAt(r),o=r==l.from?r-1:g(l.text,r-l.from,!1)+l.from,a=r==l.to?r+1:g(l.text,r-l.from,!0)+l.from;return{changes:{from:o,to:a,insert:e.doc.slice(r,a).append(e.doc.slice(o,r))},range:t.cursor(a)}}));return!r.changes.empty&&(n(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:$t}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))));let cn=null;function un(){if(!cn&&"object"==typeof document&&document.body){let{style:e}=document.body,t=[],n=new Set;for(let r in e)"cssText"!=r&&"cssFloat"!=r&&"string"==typeof e[r]&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))),n.has(r)||(t.push(r),n.add(r)));cn=t.sort().map((e=>({type:"property",label:e})))}return cn||[]}const dn=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map((e=>({type:"class",label:e}))),fn=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map((e=>({type:"keyword",label:e}))).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map((e=>({type:"constant",label:e})))),mn=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map((e=>({type:"type",label:e}))),pn=/^(\w[\w-]*|-\w[\w-]*|)$/,hn=/^-(-[\w-]*)?$/;const gn=new H,yn=["Declaration"];function bn(e){for(let t=e;;){if(t.type.isTop)return t;if(!(t=t.parent))return e}}function vn(e,t,n){if(t.to-t.from>4096){let r=gn.get(t);if(r)return r;let l=[],o=new Set,a=t.cursor(_.IncludeAnonymous);if(a.firstChild())do{for(let t of vn(e,a.node,n))o.has(t.label)||(o.add(t.label),l.push(t))}while(a.nextSibling());return gn.set(t,l),l}{let r=[],l=new Set;return t.cursor().iterate((t=>{var o;if(n(t)&&t.matchContext(yn)&&":"==(null===(o=t.node.nextSibling)||void 0===o?void 0:o.name)){let n=e.sliceString(t.from,t.to);l.has(n)||(l.add(n),r.push({label:n,type:"variable"}))}})),r}}const wn=(e=>t=>{let{state:n,pos:r}=t,l=C(n).resolveInner(r,-1),o=l.type.isError&&l.from==l.to-1&&"-"==n.doc.sliceString(l.from,l.to);if("PropertyName"==l.name||(o||"TagName"==l.name)&&/^(Block|Styles)$/.test(l.resolve(l.to).name))return{from:l.from,options:un(),validFor:pn};if("ValueName"==l.name)return{from:l.from,options:fn,validFor:pn};if("PseudoClassName"==l.name)return{from:l.from,options:dn,validFor:pn};if(e(l)||(t.explicit||o)&&function(e,t){var n;if(("("==e.name||e.type.isError)&&(e=e.parent||e),"ArgList"!=e.name)return!1;let r=null===(n=e.parent)||void 0===n?void 0:n.firstChild;return"Callee"==(null==r?void 0:r.name)&&"var"==t.sliceString(r.from,r.to)}(l,n.doc))return{from:e(l)||o?l.from:r,options:vn(n.doc,bn(l),e),validFor:hn};if("TagName"==l.name){for(let{parent:e}=l;e;e=e.parent)if("Block"==e.name)return{from:l.from,options:un(),validFor:pn};return{from:l.from,options:mn,validFor:pn}}if(!t.explicit)return null;let a=l.resolve(r),i=a.childBefore(r);return i&&":"==i.name&&"PseudoClassSelector"==a.name?{from:r,options:dn,validFor:pn}:i&&":"==i.name&&"Declaration"==a.name||"ArgList"==a.name?{from:r,options:fn,validFor:pn}:"Block"==a.name||"Styles"==a.name?{from:r,options:un(),validFor:pn}:null})((e=>"VariableName"==e.name)),kn=M.define({name:"css",parser:X.configure({props:[z.add({Declaration:F()}),j.add({"Block KeyframeList":N})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function xn(){return new E(kn,kn.data.of({autocomplete:wn}))}const An=[he("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),he("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),he("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),he("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),he("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),he("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),he("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),he("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),he("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),he('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),he('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Sn=An.concat([he("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),he("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),he("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Cn=new H,Dn=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Tn(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const In=["FunctionDeclaration"],$n={FunctionDeclaration:Tn("function"),ClassDeclaration:Tn("class"),ClassExpression:()=>!0,EnumDeclaration:Tn("constant"),TypeAliasDeclaration:Tn("type"),NamespaceDeclaration:Tn("namespace"),VariableDefinition(e,t){e.matchContext(In)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function On(e,t){let n=Cn.get(t);if(n)return n;let r=[],l=!0;function o(t,n){let l=e.sliceString(t.from,t.to);r.push({label:l,type:n})}return t.cursor(_.IncludeAnonymous).iterate((t=>{if(l)l=!1;else if(t.name){let e=$n[t.name];if(e&&e(t,o)||Dn.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of On(e,t.node))r.push(n);return!1}})),Cn.set(t,r),r}const Bn=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,En=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function Mn(e){let t=C(e.state).resolveInner(e.pos,-1);if(En.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&Bn.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let l=t;l;l=l.parent)Dn.has(l.name)&&(r=r.concat(On(e.state.doc,l)));return{options:r,from:n?t.from:e.pos,validFor:Bn}}const zn=M.define({name:"javascript",parser:U.configure({props:[z.add({IfStatement:F({except:/^\s*({|else\b)/}),TryStatement:F({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:V,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:J({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":F({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),j.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":N,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jn={test:e=>/^JSX/.test(e.name),facet:L({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Fn=zn.configure({dialect:"ts"},"typescript"),Nn=zn.configure({dialect:"jsx",props:[q.add((e=>e.isTop?[jn]:void 0))]}),Jn=zn.configure({dialect:"jsx ts",props:[q.add((e=>e.isTop?[jn]:void 0))]},"typescript");let Vn=e=>({label:e,type:"keyword"});const qn="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Vn),Ln=qn.concat(["declare","implements","private","protected","public"].map(Vn));function Pn(e={}){let t=e.jsx?e.typescript?Jn:Nn:e.typescript?Fn:zn,n=e.typescript?Sn.concat(Ln):An.concat(qn);return new E(t,[zn.data.of({autocomplete:(r=En,l=Z(n),e=>{for(let t=C(e.state).resolveInner(e.pos,-1);t;t=t.parent){if(r.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return l(e)})}),zn.data.of({autocomplete:Mn}),e.jsx?Hn:[]]);var r,l}function Rn(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const Xn="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Hn=w.inputHandler.of(((e,n,r,l,o)=>{if((Xn?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||">"!=l&&"/"!=l||!zn.isActiveAt(e.state,n,-1))return!1;let a=o(),{state:i}=a,s=i.changeByRange((e=>{var n;let r,{head:o}=e,a=C(i).resolveInner(o-1,-1);if("JSXStartTag"==a.name&&(a=a.parent),i.doc.sliceString(o-1,o)!=l||"JSXAttributeValue"==a.name&&a.to>o);else{if(">"==l&&"JSXFragmentTag"==a.name)return{range:e,changes:{from:o,insert:"</>"}};if("/"==l&&"JSXStartCloseTag"==a.name){let e=a.parent,l=e.parent;if(l&&e.from==o-2&&((r=Rn(i.doc,l.firstChild,o))||"JSXFragmentTag"==(null===(n=l.firstChild)||void 0===n?void 0:n.name))){let e=`${r}>`;return{range:t.cursor(o+e.length,-1),changes:{from:o,insert:e}}}}else if(">"==l){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(a);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(i.doc.sliceString(o,o+2))&&(r=Rn(i.doc,t,o)))return{range:e,changes:{from:o,insert:`</${r}>`}}}}return{range:e}}));return!s.changes.empty&&(e.dispatch([a,i.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)})),_n=["_blank","_self","_top","_parent"],Un=["ascii","utf-8","utf-16","latin1","latin1"],Wn=["get","post","put","delete"],Gn=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Yn=["true","false"],Zn={},Kn={a:{attrs:{href:null,ping:null,type:null,media:null,target:_n,hreflang:null}},abbr:Zn,address:Zn,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Zn,aside:Zn,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Zn,base:{attrs:{href:null,target:_n}},bdi:Zn,bdo:Zn,blockquote:{attrs:{cite:null}},body:Zn,br:Zn,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Gn,formmethod:Wn,formnovalidate:["novalidate"],formtarget:_n,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Zn,center:Zn,cite:Zn,code:Zn,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Zn,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Zn,div:Zn,dl:Zn,dt:Zn,em:Zn,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Zn,figure:Zn,footer:Zn,form:{attrs:{action:null,name:null,"accept-charset":Un,autocomplete:["on","off"],enctype:Gn,method:Wn,novalidate:["novalidate"],target:_n}},h1:Zn,h2:Zn,h3:Zn,h4:Zn,h5:Zn,h6:Zn,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Zn,hgroup:Zn,hr:Zn,html:{attrs:{manifest:null}},i:Zn,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Gn,formmethod:Wn,formnovalidate:["novalidate"],formtarget:_n,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Zn,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Zn,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Zn,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Un,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Zn,noscript:Zn,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Zn,param:{attrs:{name:null,value:null}},pre:Zn,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Zn,rt:Zn,ruby:Zn,samp:Zn,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Un}},section:Zn,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Zn,source:{attrs:{src:null,type:null,media:null}},span:Zn,strong:Zn,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Zn,summary:Zn,sup:Zn,table:Zn,tbody:Zn,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Zn,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Zn,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Zn,time:{attrs:{datetime:null}},title:Zn,tr:Zn,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Zn,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Zn},Qn={accesskey:null,class:null,contenteditable:Yn,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Yn,autocorrect:Yn,autocapitalize:Yn,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Yn,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Yn,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Yn,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Yn,"aria-hidden":Yn,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Yn,"aria-multiselectable":Yn,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Yn,"aria-relevant":null,"aria-required":Yn,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},er="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map((e=>"on"+e));for(let vr of er)Qn[vr]=null;class tr{constructor(e,t){this.tags=Object.assign(Object.assign({},Kn),e),this.globalAttrs=Object.assign(Object.assign({},Qn),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function nr(e,t,n=e.length){if(!t)return"";let r=t.firstChild,l=r&&r.getChild("TagName");return l?e.sliceString(l.from,Math.min(l.to,n)):""}function rr(e,t=!1){for(;e;e=e.parent)if("Element"==e.name){if(!t)return e;t=!1}return null}function lr(e,t,n){let r=n.tags[nr(e,rr(t))];return(null==r?void 0:r.children)||n.allTags}function or(e,t){let n=[];for(let r=rr(t);r&&!r.type.isTop;r=rr(r.parent)){let l=nr(e,r);if(l&&"CloseTag"==r.lastChild.name)break;l&&n.indexOf(l)<0&&("EndTag"==t.name||t.from>=r.firstChild.to)&&n.push(l)}return n}tr.default=new tr;const ar=/^[:\-\.\w\u00b7-\uffff]*$/;function ir(e,t,n,r,l){let o=/\s*>/.test(e.sliceDoc(l,l+5))?"":">",a=rr(n,!0);return{from:r,to:l,options:lr(e.doc,a,t).map((e=>({label:e,type:"type"}))).concat(or(e.doc,n).map(((e,t)=>({label:"/"+e,apply:"/"+e+o,type:"type",boost:99-t})))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function sr(e,t,n,r){let l=/\s*>/.test(e.sliceDoc(r,r+5))?"":">";return{from:n,to:r,options:or(e.doc,t).map(((e,t)=>({label:e,apply:e+l,type:"type",boost:99-t}))),validFor:ar}}function cr(e,t){let{state:n,pos:r}=t,l=C(n).resolveInner(r,-1),o=l.resolve(r);for(let a,i=r;o==l&&(a=l.childBefore(i));){let e=a.lastChild;if(!e||!e.type.isError||e.from<e.to)break;o=l=a,i=e.from}return"TagName"==l.name?l.parent&&/CloseTag$/.test(l.parent.name)?sr(n,l,l.from,r):ir(n,e,l,l.from,r):"StartTag"==l.name?ir(n,e,l,r,r):"StartCloseTag"==l.name||"IncompleteCloseTag"==l.name?sr(n,l,r,r):"OpenTag"==l.name||"SelfClosingTag"==l.name||"AttributeName"==l.name?function(e,t,n,r,l){let o=rr(n),a=o?t.tags[nr(e.doc,o)]:null,i=a&&a.attrs?Object.keys(a.attrs):[];return{from:r,to:l,options:(a&&!1===a.globalAttrs?i:i.length?i.concat(t.globalAttrNames):t.globalAttrNames).map((e=>({label:e,type:"property"}))),validFor:ar}}(n,e,l,"AttributeName"==l.name?l.from:r,r):"Is"==l.name||"AttributeValue"==l.name||"UnquotedAttributeValue"==l.name?function(e,t,n,r,l){var o;let a,i=null===(o=n.parent)||void 0===o?void 0:o.getChild("AttributeName"),s=[];if(i){let o=e.sliceDoc(i.from,i.to),c=t.globalAttrs[o];if(!c){let r=rr(n),l=r?t.tags[nr(e.doc,r)]:null;c=(null==l?void 0:l.attrs)&&l.attrs[o]}if(c){let t=e.sliceDoc(r,l).toLowerCase(),n='"',o='"';/^['"]/.test(t)?(a='"'==t[0]?/^[^"]*$/:/^[^']*$/,n="",o=e.sliceDoc(l,l+1)==t[0]?"":t[0],t=t.slice(1),r++):a=/^[^\s<>='"]*$/;for(let e of c)s.push({label:e,apply:n+e+o,type:"constant"})}}return{from:r,to:l,options:s,validFor:a}}(n,e,l,"Is"==l.name?r:l.from,r):!t.explicit||"Element"!=o.name&&"Text"!=o.name&&"Document"!=o.name?null:function(e,t,n,r){let l=[],o=0;for(let a of lr(e.doc,n,t))l.push({label:"<"+a,type:"type"});for(let a of or(e.doc,n))l.push({label:"</"+a+">",type:"type",boost:99-o++});return{from:r,to:r,options:l,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(n,e,l,r)}function ur(e){let{extraTags:t,extraGlobalAttributes:n}=e,r=n||t?new tr(t,n):tr.default;return e=>cr(r,e)}const dr=zn.parser.configure({top:"SingleExpression"}),fr=[{tag:"script",attrs:e=>"text/typescript"==e.type||"ts"==e.lang,parser:Fn.parser},{tag:"script",attrs:e=>"text/babel"==e.type||"text/jsx"==e.type,parser:Nn.parser},{tag:"script",attrs:e=>"text/typescript-jsx"==e.type,parser:Jn.parser},{tag:"script",attrs:e=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(e.type),parser:dr},{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:zn.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:kn.parser}],mr=[{name:"style",parser:kn.parser.configure({top:"Styles"})}].concat(er.map((e=>({name:e,parser:zn.parser})))),pr=M.define({name:"html",parser:G.configure({props:[z.add({Element(e){let t=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+t[0].length?e.continue():e.lineIndent(e.node.from)+(t[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let t,n=null;for(let r=e.node;;){let e=r.lastChild;if(!e||"Element"!=e.name||e.to!=r.to)break;n=r=e}return n&&(!(t=n.lastChild)||"CloseTag"!=t.name&&"SelfClosingTag"!=t.name)?e.lineIndent(n.from)+e.unit:null}}),j.add({Element(e){let t=e.firstChild,n=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==n.name?n.from:e.to}:null}}),P.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),hr=pr.configure({wrap:W(fr,mr)});function gr(e={}){let t,n="";!1===e.matchClosingTags&&(n="noMatch"),!0===e.selfClosingTags&&(n=(n?n+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(t=W((e.nestedLanguages||[]).concat(fr),(e.nestedAttributes||[]).concat(mr)));let r=t?pr.configure({wrap:t,dialect:n}):n?hr.configure({dialect:n}):hr;return new E(r,[hr.data.of({autocomplete:ur(e)}),!1!==e.autoCloseTags?br:[],Pn().support,xn().support])}const yr=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),br=w.inputHandler.of(((e,n,r,l,o)=>{if(e.composing||e.state.readOnly||n!=r||">"!=l&&"/"!=l||!hr.isActiveAt(e.state,n,-1))return!1;let a=o(),{state:i}=a,s=i.changeByRange((e=>{var n,r,o;let a,s=i.doc.sliceString(e.from-1,e.to)==l,{head:c}=e,u=C(i).resolveInner(c,-1);if(s&&">"==l&&"EndTag"==u.name){let t=u.parent;if("CloseTag"!=(null===(r=null===(n=t.parent)||void 0===n?void 0:n.lastChild)||void 0===r?void 0:r.name)&&(a=nr(i.doc,t.parent,c))&&!yr.has(a)){return{range:e,changes:{from:c,to:c+(">"===i.doc.sliceString(c,c+1)?1:0),insert:`</${a}>`}}}}else if(s&&"/"==l&&"IncompleteCloseTag"==u.name){let e=u.parent;if(u.from==c-2&&"CloseTag"!=(null===(o=e.lastChild)||void 0===o?void 0:o.name)&&(a=nr(i.doc,e,c))&&!yr.has(a)){let e=c+(">"===i.doc.sliceString(c,c+1)?1:0),n=`${a}>`;return{range:t.cursor(c+n.length,-1),changes:{from:c,to:e,insert:n}}}}return{range:e}}));return!s.changes.empty&&(e.dispatch([a,i.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));export{Kt as a,We as b,Te as c,sn as d,ke as e,xn as f,gr as g,dt as h,on as i,Pn as j,an as k};
