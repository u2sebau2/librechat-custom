import{r as e,j as s}from"./vendor.CIjlGcQ4.js";import{E as a,o as t,$ as r,u as o,a as i,r as n,c as l,B as m}from"./index.B-jiM_Io.js";import{af as c,ag as d,aj as u}from"./radix-ui.BsTVSq9S.js";import"./utilities.TtBcTuYn.js";import{d as j}from"./tanstack-vendor.D-qMFiz_.js";import{E as p,l as g,y as x,P as h}from"./headlessui.CIHxhWWL.js";import"./react-interactions.Dw8P-Acc.js";import"./markdown_highlight.YFvJ8PVJ.js";import"./validation.CeCA-dRw.js";import"./math-katex.steiuUVT.js";import"./locales.B61wW3zk.js";import"./i18n.PJDdRaIg.js";import"./routing.CUb-DEZj.js";import"./avatars.h8saQOOS.js";import"./advanced-inputs.BZZf69Ip.js";import"./animations.DQSQFyaB.js";import"./virtualization.BXkTUKaT.js";import"./framer-motion.CWc5O3K7.js";import"./http-client.DWY2CjRp.js";import"./date-utils.j-oxXFG2.js";import"./forms.8myLVJuk.js";import"./security-ui.S_jkxcnP.js";import"./heic-converter.Cz_Prg7D.js";import"./markdown-processing.CP3lDCMF.js";import"./sandpack.DHPDE639.js";import"./codemirror-core.CtK9-mQW.js";import"./codemirror-state.Pf71Wo5N.js";import"./codemirror-view.CA7MJLsC.js";import"./codemirror-language.BRqRHx8S.js";const f=({tag:a,selected:t,handleSubmit:o,icon:i,...n})=>{const[l,m]=e.useState(!1);return s.jsx(p,{"aria-label":a,className:"group flex w-full gap-2 rounded-lg p-2.5 text-sm text-text-primary transition-colors duration-200 focus:outline-none data-[focus]:bg-surface-hover data-[focus-visible]:ring-2 data-[focus-visible]:ring-primary",...n,as:"button",onClick:async()=>{"New Bookmark"!==a?(m(!0),o(a),m(!1)):o()},children:s.jsx("div",{className:"flex grow items-center justify-between gap-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[null!=i?i:l?s.jsx(r,{className:"size-4"}):t?s.jsx(c,{className:"size-4"}):s.jsx(d,{className:"size-4"}),s.jsx("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:a})]})})})},b=({tags:e,handleSubmit:a,header:t})=>{const{bookmarks:r}=o();return s.jsxs(s.Fragment,{children:[t,r.length>0&&s.jsx("div",{className:"my-1.5 h-px",role:"none"}),r.map(((t,r)=>s.jsx(f,{tag:t.tag,selected:e.includes(t.tag),handleSubmit:a},`${t._id??t.tag}-${r}`)))]})},k=({tags:e=[],setTags:a})=>{const{bookmarks:t}=o(),r=i(),n=()=>{a([])};return 0===t.length?s.jsxs("div",{className:"flex flex-col",children:[s.jsx(f,{tag:r("com_ui_clear_all"),"data-testid":"bookmark-item-clear",handleSubmit:n,selected:!1,icon:s.jsx(u,{className:"size-4"})}),s.jsx(f,{tag:r("com_ui_no_bookmarks"),"data-testid":"bookmark-item-no-bookmarks",handleSubmit:()=>Promise.resolve(),selected:!1,icon:"ðŸ¤”"})]}):s.jsx("div",{className:"flex flex-col",children:s.jsx(b,{tags:e,handleSubmit:s=>{if(void 0===s)return;const t=(s=>e.some((e=>e===s))?e.filter((e=>e!==s)):[...e,s])(s);a(t)},header:s.jsx(f,{tag:r("com_ui_clear_all"),"data-testid":"bookmark-item-clear",handleSubmit:n,selected:!1,icon:s.jsx(u,{className:"size-4"})})})})},v=({tags:r,setTags:o,isSmallScreen:u})=>{const p=i(),{data:f}=j([t.conversationTags],(()=>a.getConversationTags()),{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,...b});var b;const v=e.useMemo((()=>r.length>0?r.join(", "):p("com_ui_bookmarks")),[r,p]);return s.jsx(g,{as:"div",className:"group relative",children:({open:e})=>s.jsxs(s.Fragment,{children:[s.jsx(n,{description:v,render:s.jsx(x,{id:"bookmark-menu-button","aria-label":p("com_ui_bookmarks"),className:l("flex items-center justify-center","size-10 border-none text-text-primary hover:bg-accent hover:text-accent-foreground","rounded-full border-none p-2 hover:bg-surface-hover md:rounded-xl",e?"bg-surface-hover":""),"data-testid":"bookmark-menu",children:r.length>0?s.jsx(c,{className:"icon-lg text-text-primary","aria-hidden":"true"}):s.jsx(d,{className:"icon-lg text-text-primary","aria-hidden":"true"})})}),s.jsx(h,{anchor:"bottom",className:"absolute left-0 top-full z-[100] mt-1 w-60 translate-y-0 overflow-hidden rounded-lg bg-surface-secondary p-1.5 shadow-lg outline-none",children:f&&s.jsx(m.Provider,{value:{bookmarks:f.filter((e=>e.count>0))},children:s.jsx(k,{tags:r,setTags:o})})})]})})};export{v as default};
